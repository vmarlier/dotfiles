/*!
 * Â© 2016 Avira Operations GmbH & Co. KG. All rights reserved.
 * No part of this extension may be reproduced, stored or transmitted in any
 * form, for any reason or by any means, without the prior permission in writing
 * from the copyright owner. The text, layout, and designs presented are
 * protected by the copyright laws of the United States and international
 * treaties.
 */
!function e(t,n,r){function o(c,s){if(!n[c]){if(!t[c]){var u="function"==typeof require&&require;if(!s&&u)return u(c,!0);if(i)return i(c,!0);var a=new Error("Cannot find module '"+c+"'");throw a.code="MODULE_NOT_FOUND",a}var f=n[c]={exports:{}};t[c][0].call(f.exports,function(e){var n=t[c][1][e];return o(n||e)},f,f.exports,e,t,n,r)}return n[c].exports}for(var i="function"==typeof require&&require,c=0;c<r.length;c++)o(r[c]);return o}({1:[function(e,t,n){"use strict";t.exports=e("./src/ContentMessenger")},{"./src/ContentMessenger":2}],2:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./Messenger"),u=e("./ContentTopic"),a=e("./chrome"),f=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,u)),n=e._onMessage.bind(e);return a.runtime.onMessage.addListener(n),window.addEventListener("unload",function(){a.runtime.onMessage.removeListener(n)}),a.runtime.connect({name:"ContentMessenger"}).onDisconnect.addListener(e._onDisconnect.bind(e)),e}return i(t,e),c(t,[{key:"_onMessage",value:function(e,t,n){if(!t.tab&&e.publish){var r=this._getTopic(e.publish);r&&r.publish(e.message,n)}return!0}},{key:"_onDisconnect",value:function(){var e=this._getTopic("Background:closed");e&&e.publish()}},{key:"publish",value:function(e,t,n){var r=10;!function o(){a.runtime.sendMessage({publish:e,message:t},function(e){var t=a.runtime.lastError;t&&"Could not establish connection. Receiving end does not exist."===t.message?(r-=1)&&setTimeout(o,50):"function"==typeof n&&n(e)})}()}}]),t}(s);t.exports=f},{"./ContentTopic":3,"./Messenger":4,"./chrome":6}],3:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=e("./Topic"),s=e("./chrome"),u=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return s.runtime.sendMessage({subscribe:e}),n}return i(t,e),t}(c);t.exports=u},{"./Topic":5,"./chrome":6}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e),this._topicClass=t,this._topics={}}return o(e,null,[{key:"getInstance",value:function(){return this._instance||(this._instance=new this),this._instance}}]),o(e,[{key:"_getTopic",value:function(e,t){var n=this._topics[e];return!n&&t&&(this._topics[e]=n=new this._topicClass(e)),n}},{key:"subscribe",value:function(e,t){this._getTopic(e,!0).subscribe(t)}},{key:"publish",value:function(e,t,n,r){var o=this._getTopic(e);o&&o.publish(t,n,r)}}]),e}();t.exports=i},{}],5:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){r(this,e),this._name=t,this._callbacks=[]}return o(e,[{key:"publish",value:function(e,t){var n=this._wrapCallback(t);this._callbacks.forEach(function(t){return t(e,n)})}},{key:"_wrapCallback",value:function(e){return null==e?e:function(){try{e.apply(void 0,arguments)}catch(e){if("Attempting to use a disconnected port object"!==e.message)throw e}}}},{key:"subscribe",value:function(e){this._callbacks.push(e)}}]),e}();t.exports=i},{}],6:[function(e,t,n){"use strict";"undefined"!=typeof browser&&browser.runtime?t.exports=browser:t.exports=chrome},{}],7:[function(e,t,n){"use strict";var r=e("messenger/Content"),o=r.getInstance();t.exports=o},{"messenger/Content":1}],8:[function(e,t,n){"use strict";var r=e("content/messagingInterface"),o={track:function(e,t,n){return r.publish("Mixpanel:track",{event:e,properties:t},n)}};t.exports=o},{"content/messagingInterface":7}],9:[function(e,t,n){"use strict";var r=e("mustache"),o=e("content/messagingInterface"),i=e("content/mixpanel"),c=e("jquery"),s=function(e,t){if(e){c("<link>",{rel:"stylesheet",type:"text/css",href:e}).appendTo(document.head);var n=document.createElement("img");n.onerror=t,n.src=e}};c(document.body).on("click","[data-close]",function(e){e.preventDefault(),o.publish("Iframe:close")}),c(document.body).on("click","[data-event]",function(e){var t=c.extend(!0,{},c(e.currentTarget).data()),n=t.event;return delete t.event,i.track(n,t)}),o.subscribe("AO:data#external",function(e){return s(e.stylesheet,function(){var t=e.products[0];if(t){var n={product:t,meta:e.meta,requestData:e.requestData},s=r.render(e.templates.external,n);c("#external").html(s),e.javascript&&c.getScript(e.javascript),i.track("Offers - Indicator - Show",e.meta),o.publish("Iframe:redimension",{width:document.body.style.width||document.body.offsetWidth+"px",height:document.body.style.height||document.body.offsetHeight+"px"})}})})},{"content/messagingInterface":7,"content/mixpanel":8,jquery:"jquery",mustache:"mustache"}]},{},[9]);